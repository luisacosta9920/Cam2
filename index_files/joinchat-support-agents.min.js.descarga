!function(u,e,j,m){"use strict";var v,w,b,x,$,q;function C(e){return m.settings.message_send.replace("{AGENT}",e)}function n(){if(m.settings&&m.settings.agents){var e,c=m.settings.agents,n=!!m.settings.message_hash,t=!!m.$(".joinchat__channels").length,i=(p=new Date,e=p.getTimezoneOffset()+c.gtm_offset,new Date(p.getTime()+6e4*e)),s=i.getDay(),l=u.extend({},c.list),a=m.$(".joinchat__agents"),_="",o=!0;if(m.expand_agents=function(){o=!1;var e=m.$(".joinchat__box__scroll");m.$(".joinchat__agents").removeClass("joinchat__agents--collapsed"),e.animate({scrollTop:a[0].offsetTop-e[0].offsetTop-10},200)},l=u.map(l,function(o){var t,a,e,n=o.days[s];return"boolean"==typeof n?o.online=n:(o.online=!1,u.each(n.split(" "),function(e,n){var n=n.split("-"),t=n[0].split(":"),a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),parseInt(t[0]),parseInt(t[1]),0),n="00:00"==n[1]?new Date(i.getFullYear(),i.getMonth(),i.getDate()+1,0,0,0):(t=n[1].split(":"),new Date(i.getFullYear(),i.getMonth(),i.getDate(),parseInt(t[0]),parseInt(t[1]),0));a<=i&&i<n&&(o.online=!0)})),!o.online&&c.offline_show&&(t=6048e5,a=[],u.each(o.days,function(e,n){var t=e<s?e-s+7:e-s;!0===n?a.push(new Date(i.getFullYear(),i.getMonth(),i.getDate()+t,0,0,0)):!1!==n&&u.each(n.split(" "),function(e,n){n=n.split("-")[0].split(":");a.push(new Date(i.getFullYear(),i.getMonth(),i.getDate()+t,parseInt(n[0]),parseInt(n[1]),0))})}),u.each(a,function(e,n){i<n&&n-i<t&&(t=n-i)}),6048e5==t?o.back="···":864e5<t?(e=Math.ceil(t/864e5),o.back=joinchat_agents_l10n.d[1<t?1:0].replace("%s",e)):36e5<t?(e=Math.ceil(t/36e5),o.back=joinchat_agents_l10n.h[1<t?1:0].replace("%s",e)):6e4<t?(e=Math.ceil(t/6e4),o.back=joinchat_agents_l10n.m[1<t?1:0].replace("%s",e)):o.back=joinchat_agents_l10n.m[0].replace("%s",1)),o}),0==(l=c.offline_show?l:u.grep(l,function(e){return e.online})).length)0==m.$(".joinchat__contact").length&&m.$div.addClass("joinchat--hidden"),u(".joinchat__woo-btn__wrapper").remove();else if(n||1!=l.length||m.settings.chatbot||t){if(c.random_order)for(var h=l,r=h.length-1;0<r;r--){var g=Math.floor(Math.random()*(r+1)),f=h[r];h[r]=h[g],h[g]=f}var d,p=l.filter(function(e){return e.online});m.settings.telephone=(p.length?p:l)[0].phone,c.offline_contact||p.length||u(".joinchat__woo-btn__wrapper").remove(),e=n&&l.length>c.max_open,o=e,c.offline_show&&c.offline_contact&&a.addClass("joinchat__agents--offline-contact"),e&&a.addClass("joinchat__agents--collapsed"),u.each(l,function(e,n){var t=n.online?"joinchat__agent--online":"joinchat__agent--offline",a='data-id="'+e+'"',o="";0==e&&(a+=5<l.length?' data-count="+'+(l.length-5)+'"':"",o='data-start="'+m.$(".joinchat__button__sendtext").text()+'"'),_+='<div class="joinchat__agent__wrapper"><div class="joinchat__agent {{classes}}" {{data_agent}}> <div class="joinchat__agent__image" style="{{image}}"></div> <div class="joinchat__agent__info" {{data_info}}>  <div class="joinchat__agent__name">{{name}}</div>  <div class="joinchat__agent__role">{{role}}</div> </div> <div class="joinchat__agent__out">{{back}}</div></div></div>'.replace("{{data_agent}}",a).replace("{{data_info}}",o).replace("{{classes}}",t).replace("{{name}}",n.name).replace("{{role}}",n.role).replace("{{image}}",n.image?"background-image:url("+n.image+");":"").replace("{{back}}",n.back||"")}),a.html(_),a[0].style.setProperty("--agents",l.length),e&&u(j).on("joinchat:hide",function(){o=!0,setTimeout(function(){a.addClass("joinchat__agents--collapsed")},500)}),a.on("click",".joinchat__agent",function(){var e=l[u(this).data("id")];o?m.expand_agents():(e.online||c.offline_contact)&&(m.save_hash(),m.chatbox_hide(),m.open_whatsapp(e.phone,C(e.name)))}),m.use_qr()&&(v=m.$(".joinchat__box").get(0),w=m.$(".joinchat__box__scroll").get(0),b=m.$(".joinchat__agents").get(0),x=m.$div.hasClass("joinchat--left"),d=m.$(".joinchat__qr"),u(j).one("joinchat:show",function(){d.find("canvas:not(.qr__channel)").remove(),u.each(l,function(e,n){(c.offline_contact||n.online)&&((n=m.qr(m.whatsapp_link(n.phone,C(n.name),!1))).classList.add("qr__channel","qr__channel--agent-"+e),d.append(n))})}),m.$(".joinchat__agent").on("mouseenter",function(){var i;o||!c.offline_contact&&u(this).hasClass("joinchat__agent--offline")||(i=this,clearTimeout(q),clearTimeout($),d.addClass("joinchat__qr--show"),$=setTimeout(function(){var e,n,t,a,o;e=i.parentElement,n=Array.from(e.parentElement.children).indexOf(e),m.$(".qr__channel--show").removeClass("qr__channel--show"),m.$(".qr__channel--agent-"+n).addClass("qr__channel--show"),n=v.clientWidth,t=v.clientHeight,a=w.scrollTop,o=b.offsetTop,n=x?0:-1*n+16,t=t+a-o-e.offsetTop-e.clientHeight-8,m.$div.css({"--qr-x":n+"px","--qr-y":"-"+t+"px","--qr-a":"calc(var(--s)/2 - 6px)"})},250))}).on("mouseleave",function(){o||!c.offline_contact&&u(this).hasClass("joinchat__agent--offline")||(q=setTimeout(function(){d.removeClass("joinchat__qr--show")},300))}),u(j).on("joinchat:hide",function(){d.removeClass("joinchat__qr--show")})),u(j).on("joinchat:can_contact",function(){t||(a.removeClass("joinchat--hidden"),setTimeout(m.expand_agents,10))})}else c.offline_contact||l[0].online?(m.$(".joinchat__button").off("mouseenter mouseleave click").on("click",function(){m.save_hash(),m.open_whatsapp(l[0].phone,C(l[0].name))}),m.chatbox=!0,u(j).on("joinchat:hide",function(){m.chatbox=!0})):m.$div.addClass("joinchat--hidden");u(j).trigger("joinchat:agents",[l])}}m.is_ready?n():u(j).on("joinchat:start",function(){m=e.joinchat_obj,n()})}(jQuery,window,document,window.joinchat_obj||{});