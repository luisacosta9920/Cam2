!function(i,o,s,c){"use strict";var h,l,d,_,r,p=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);function j(n){var e="whatsapp"==n.app||"{WHATSAPP}"==n.id.toUpperCase()?c.settings.telephone:n.id;return"whatsapp"===n.app?c.whatsapp_link(e,c.settings.message_agent||c.settings.message_send):(n.url||"{ID}").replace("{ID}",encodeURIComponent(e)).replace("{MSG}",encodeURIComponent(c.settings.message_send.replace("{AGENT}","")))}function m(){var n,e=i(this).data("info"),a=e.app;if(e.qr)return c.is_mobile&&c.can_qr?(t=c.qr(j(e),{size:300}),(n=s.createElement("a")).href=t.toDataURL(),n.type="image/png",n.download=location.hostname.replace(".","_")+"_"+a+"_qr.png",void n.click()):void 0;var t={link:j(e),chat_channel:a,chat_id:"{WHATSAPP}"!=e.id.toUpperCase()?e.id:c.settings.telephone,chat_message:"whatsapp"==a||e.url.includes("{MSG}")?c.settings.message_send:"--"};c.save_hash(),c.chatbox_hide(),!1!==i(s).triggerHandler("joinchat:open",[t])&&(c.send_event(t),o.open(t.link,"joinchat","noopener"))}function u(n){var e,a=i(n).data("info"),a=(c.$(".qr__channel--show").removeClass("qr__channel--show"),c.$(".qr__channel--"+a.app).addClass("qr__channel--show"),c.$(".joinchat__box").get(0).clientWidth),t=a-244,o=108,a=l?0:-1*a+16,n=l?n.offsetLeft+.85*n.clientWidth/2-6-8:n.offsetLeft+.85*n.clientWidth/2-6,o=n<=o?(e=a,n):n-o<=t?(e=a+n-o,o):(e=a+t,n-t);c.$div.css({"--qr-x":e+"px","--qr-y":"0px","--qr-a":o+"px"})}function g(n){return h.children(n?".joinchat__channel--"+n:null)}function n(){var n,e,a,t;h=c.$(".joinchat__channels"),c.settings.channels_hide&&(p||g("facetime").remove(),c.is_mobile||p||g("phone").remove(),c.is_mobile||p||g("sms").remove()),0===g().length?c.$div.addClass("joinchat--hidden"):1===g().length&&g("whatsapp").length?(h.remove(),c.$(".joinchat__contact").length||c.$div.removeClass("joinchat--nobtn"),c.$div.hasClass("joinchat--channels")&&(c.chatbox=!0,i(s).on("joinchat:hide",function(){c.chatbox=!0}))):(c.$(".joinchat__channel").on("click",m),(n=g("sms")).length&&p&&((e=n.data("info")).url=e.url.replace("?body=","&body="),n.data("info",e)),(c.use_qr()||0<g("qr").length)&&(l=c.$div.hasClass("joinchat--left"),a=c.$(".joinchat__qr"),t=c.$(c.use_qr()?".joinchat__channel":".joinchat__channel--qr"),0==a.length&&(a=i('<div class="joinchat__qr"><div>'+omnichannel_l10n.scan+"</div></div>"),c.$(".joinchat__button").append(a)),i(s).one("joinchat:show",function(){a.find("canvas:not(.qr__channel)").remove(),t.each(function(){var n,e;i(this).hasClass("joinchat__channel--no-qr")||(n=i(this).data("info"),(e=c.qr(j(n))).classList.add("qr__channel","qr__channel--"+n.app),a.append(e))})}),i(s).on("joinchat:show",function(){d=Date.now()+500}),t.on("mouseenter mouseleave",function(n){var e;i(this).hasClass("joinchat__channel--no-qr")||(clearTimeout(_),clearTimeout(r),"mouseenter"==n.type?(e=this,n=d-Date.now(),_=0<n?setTimeout(function(){a.addClass("joinchat__qr--show"),u(e)},n):(a.addClass("joinchat__qr--show"),setTimeout(function(){u(e)},300))):r=setTimeout(function(){a.removeClass("joinchat__qr--show")},300))}),i(s).on("joinchat:hide",function(){a.removeClass("joinchat__qr--show")})),i(s).on("joinchat:can_contact",function(){h.removeClass("joinchat--hidden")}))}i(s).on("joinchat:agents",function(n,e){var a=c.$(".joinchat__agents"),t=!!h.parent().length;t||e.length?(c.$(".joinchat__box__content").children().not(".joinchat__contact").length||c.$div.addClass("joinchat--channels"),0==e.length?g("whatsapp").remove():1==e.length?t&&(a.remove(),c.settings.telephone=e[0].phone,c.settings.message_agent=c.settings.message_send.replace("{AGENT}",e[0].name)):(g("whatsapp").addClass("joinchat__channel--no-qr").off("click",m).on("click",function(){h.addClass("joinchat--hidden"),a.removeClass("joinchat--hidden"),setTimeout(c.expand_agents,10)}),t&&(a.addClass("joinchat--hidden joinchat__agents--collapsed"),i(s).on("joinchat:hide",function(){setTimeout(function(){h.removeClass("joinchat--hidden"),a.addClass("joinchat--hidden joinchat__agents--collapsed")},500)})))):c.$div.addClass("joinchat--hidden")}),c.is_ready?n():i(s).on("joinchat:start",function(){c=o.joinchat_obj,n()})}(jQuery,window,document,window.joinchat_obj||{});